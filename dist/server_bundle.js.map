{"version":3,"sources":["webpack:///webpack/bootstrap caff183778aa03c0cfb5","webpack:///external \"babel-polyfill\"","webpack:///./src/server/app.js","webpack:///external \"fs\"","webpack:///external \"express\"","webpack:///external \"http\"","webpack:///external \"https\"","webpack:///./src/server/applyStatic/index.js","webpack:///external \"path\"","webpack:///external \"compression\"","webpack:///./src/server/applyStatic/getSiteMap.js","webpack:///external \"sitemap\"","webpack:///./src/client/CONSTANTS.js","webpack:///./src/client/posts.data.js","webpack:///./src/server/applyStatic/getFeeds.js","webpack:///external \"crypto\"","webpack:///external \"moment\"","webpack:///external \"rss\"","webpack:///./src/client/components/SimplePost/translate.js","webpack:///external \"marked-chartjs-binding\"","webpack:///./src/server/applyStatic/applyDEVServer.js","webpack:///external \"webpack-dev-middleware\"","webpack:///external \"webpack-hot-middleware\"","webpack:///./webpack_config/browser.dev.js","webpack:///external \"webpack\"","webpack:///external \"extract-text-webpack-plugin\"","webpack:///./src/server/router/index.js","webpack:///./src/server/router/page.js","webpack:///external \"react\"","webpack:///external \"react-dom/server\"","webpack:///external \"react-redux\"","webpack:///./src/server/getPostContent/index.js","webpack:///./src/server/getPostContent/parsePost.js","webpack:///./src/client/generateRoutes.js","webpack:///./src/client/components/SimpleApp/index.js","webpack:///./src/client/components/SimpleApp/Header.js","webpack:///external \"jquery\"","webpack:///./src/client/components/PerspectiveImg/index.js","webpack:///./src/client/components/SimplePost/index.js","webpack:///external \"react-dom\"","webpack:///./src/client/components/Disqus/index.js","webpack:///./src/client/utils/isBrowser.js","webpack:///./src/client/utils/getPostUrl.js","webpack:///./src/client/components/SimpleList/index.js","webpack:///./src/client/pages/About/index.js","webpack:///external \"react-router\"","webpack:///./src/client/state/createStore.js","webpack:///external \"redux\"","webpack:///external \"react-router-redux\"","webpack:///./src/client/state/post/reducer.js","webpack:///./src/client/state/post/actions.js","webpack:///./src/server/utils/escapeJSONString.js","webpack:///./src/template/createPage.js","webpack:///./src/template/createHead.js"],"names":["app","use","server","process","argv","port","devPort","createServer","proxyUpgradeServer","req","res","redirect","domain","listen","options","cert","readFileSync","key","ca","proPort","console","log","main","catch","err","setTimeout","sitemap","feed","xmlList","get","static","prefix","Object","keys","forEach","name","set","send","STATIC_PATHS","applyPath","path","applyStatic","cwd","hostname","BLOG","ORIGIN","staticPages","postPages","map","item","fileName","Promise","resolve","reject","createSitemap","urls","concat","url","toXML","xml","getSiteMap","DISQUS","ARTICLE_ID_PREFIX","SHORT_NAME","DEFAULT_IDENTIFIER","DEFAULT_TITLE","title","publicDate","description","getContent","AUTHOR","SITE_URL","FEED_URL","POST_PREFIX","getPostUrl","getPostContent","filePath","join","encoding","feed_url","site_url","slice","content","htmlContent","md5","createHash","guid","update","digest","date","feedItem","initCommands","commands","push","reg","handler","sideNoteCount","translate","result","command","regResult","exec","match","text","replace","apply","env","NODE_ENV","webpackMiddleware","require","webpackHotMiddleware","browserDEVConfig","webpack","compiler","publicPath","output","ExtractTextPlugin","module","exports","target","devtool","debug","watch","entry","browser_bundle","__dirname","filename","loaders","test","JSON","stringify","exclude","loader","extract","plugins","allChunks","HotModuleReplacementPlugin","quiet","response","renderPost","bind","renderPage","router","Router","getPageRender","NOT_FOUND_CONTENT","transformPostsData","data","hash","postsDataHash","updatePostStore","store","postData","then","dispatch","e","internalErr","message","status","redirectReq","notFound","page","getPostPageContent","props","next","initialState","getState","callback","isPage","routes","lastIndexOf","location","error","redirectLocation","renderProps","operator","pathname","search","pageContent","SimplePostsCache","readFile","_data","parsePost","rawText","generateRoutes","generateRouter","history","SimpleApp","children","renderFooter","string","PropTypes","ACTIVE_ITEMS","ABOUT","POST_LIST","HEADER_HEIGHT","BG_IMG_WIDTH","BG_IMG_HEIGHT","BG_IMGS","BG_IMGS_LENGTH","length","getActiveItem","Header","randomIndex","Math","round","random","bgImg","state","windowWidth","handleResizing","$window","window","resize","unbind","width","setState","ACTIVE_ITEM","renderNav","propTypes","mapState","routing","ConnectedHeader","number","START_RATIO","END_RATIO","ANIMATION_TIME","getZeroIfNaN","isNaN","PerspectiveImg","height","containerWidth","containerHeight","ratio","imgStyle","assign","style","getImgStyle","start","show","newWidth","newHeight","top","left","transition","startAnimation","src","Component","isRequired","position","CODEMIRROR_DEFAULT_CONFIG","htmlMode","readOnly","lineNumbers","lineWrapping","theme","tabSize","getModeFromNode","codeDOMNode","lang","getAttribute","indexOf","toLowerCase","htmlDecode","input","document","createElement","innerHTML","childNodes","nodeValue","highlightCode","codeBlockArr","call","config","value","codeDOM","mode","CodeMirror","elt","parentNode","replaceChild","SimplePost","id","MarkedContent","createClass","componentDidMount","highlightCodes","componentDidUpdate","codes","findDOMNode","querySelectorAll","render","__html","toString","select","post","ConnectedSimplePost","Disqus","initialIdentifier","initialTitle","initialUrl","getDefaultProps","href","requireInit","disqus_shortname","disqus_identifier","disqus_title","disqus_url","dsq","type","async","getElementsByTagName","appendChild","isBrowser","SimpleList","index","LIST_STYLE","listStyle","IMG_STYLE","marginTop","JLPT_WIKI_URL","ATOLS_YOUTUBE_URL","D3_GALLERY_SRC","SSJS","About","createStore","createReducer","shouldPatch","reducers","reduxRouterMiddleware","createStoreWithMiddleware","hot","accept","postReducer","nextRootReducer","replaceReducer","initialPost","reducer","action","initPost","escapeJSONString","createPage","ctx","createHead"],"mappings":"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","file":"server_bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap caff183778aa03c0cfb5","module.exports = require(\"babel-polyfill\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-polyfill\"\n// module id = 1\n// module chunks = 0","import fs from 'fs';\n\nimport express from 'express';\nimport http from 'http';\nimport https from 'https';\n\nimport applyStatic from './applyStatic';\nimport router from './router';\n\n// TODO: make these into config file\nconst domain = 'blog.oyyd.net';\nconst devPort = 8080;\nconst proPort = 443;\nconst app = express();\n\nlet port = null;\n\nasync function main() {\n  // serve static files\n  await applyStatic(app);\n\n  // page router\n  app.use('/', router);\n\n  let server = null;\n\n  if (process.argv[2] === 'dev') {\n    port = devPort;\n    server = http.createServer(app);\n  } else {\n    const proxyUpgradeServer = express();\n    proxyUpgradeServer.use('/', (req, res) => {\n      res.redirect(301, `https://${domain}`);\n    });\n    proxyUpgradeServer.listen(80);\n\n    const options = {\n      cert: fs.readFileSync(`/etc/ssl/certs/${domain}.crt`),\n      key: fs.readFileSync(`/etc/ssl/private/${domain}.key`),\n      ca: fs.readFileSync('/etc/ssl/certs/starfield.pem'),\n    };\n    port = proPort;\n    server = https.createServer(options, app);\n  }\n\n  server.listen(port);\n\n  console.log(`server running on ${port}`); // eslint-disable-line\n}\n\nmain().catch((err) => {\n  setTimeout(() => {\n    throw err;\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/app.js","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"https\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"https\"\n// module id = 6\n// module chunks = 0","import { join } from 'path';\n\nimport express from 'express';\nimport compression from 'compression';\nimport getSiteMap from './getSiteMap';\nimport getFeeds from './getFeeds';\nimport applyDEVServer from './applyDEVServer';\n\nconst STATIC_PATHS =\n  ['/dist', '/static', '/posts', '/static_lib'];\nconst prefix = process.cwd();\n\nfunction applyPath(app, path) {\n  app.use(path, compression());\n  app.use(path, express.static(join(prefix, path)));\n}\n\nasync function applyStatic(app) {\n  const sitemap = await getSiteMap();\n  const feed = getFeeds();\n\n  const xmlList = {\n    sitemap, feed,\n  };\n\n  // show the ownership to google webmaster tools\n  app.get('/google38940b23fa0e04ca.html', express.static(join(prefix)));\n\n  applyDEVServer(app);\n\n  Object.keys(xmlList).forEach((name) => {\n    app.get(`/dist/${name}.xml`, (req, res) => {\n      res.set('Content-Type', 'text/xml');\n      res.send(xmlList[name]);\n    });\n  });\n\n  STATIC_PATHS.forEach(path => applyPath(app, path));\n}\n\nexport default applyStatic;\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/applyStatic/index.js","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"compression\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"compression\"\n// module id = 9\n// module chunks = 0","// server\nimport sm from 'sitemap';\n\nimport CONSTANTS from '../../client/CONSTANTS';\nimport postData from '../../client/posts.data';\n\nconst hostname = CONSTANTS.BLOG.ORIGIN;\nconst staticPages = ['/', '/about'];\nconst postPages = postData.map(item => `/post/${item.fileName}`);\n\nexport default async function getSiteMap() {\n  return new Promise((resolve, reject) => {\n    const sitemap = sm.createSitemap({\n      hostname,\n      urls: staticPages.concat(postPages).map(url => ({\n        url,\n      })),\n    });\n\n    sitemap.toXML((err, xml) => {\n      if (err) {\n        reject(err);\n        return;\n      }\n\n      resolve(xml);\n    });\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/applyStatic/getSiteMap.js","module.exports = require(\"sitemap\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sitemap\"\n// module id = 11\n// module chunks = 0","export default {\n  BLOG: {\n    ORIGIN: 'https://blog.oyyd.net',\n  },\n  DISQUS: {\n    ARTICLE_ID_PREFIX: 'oyyd_blog_article_',\n    SHORT_NAME: 'oyyd',\n    DEFAULT_IDENTIFIER: 'oyyd-blog_default',\n    DEFAULT_TITLE: 'oyyd-blog',\n  },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/CONSTANTS.js","/* eslint-disable */\nexport default [{\n  fileName: 'what_does_jest_solve',\n  title: '用jest进一步简化测试',\n  publicDate: '2016年10月24日',\n  description: 'jest是fb推出的测试代码库，得到了很多人的点赞。在javascript的生态上，测试代码库的使用普遍比较稳定，通常是在jasmine和mocha上做选择。那么为什么我们需要一个新的代码库呢？jest又解决了哪些问题呢？',\n}, {\n  fileName: 'reactjs_conf_2016_recommendation',\n  title: '推荐React.js Conf 2016中的一些精彩演讲',\n  publicDate: '2016年03月16日',\n  description: '今年会上没有特别爆炸性的项目出现，并且关于React Native的话题有很多。下面我会推荐一些我觉得比较精彩、比较有价值的演讲。',\n}, {\n  fileName: 'how_to_split_your_code_in_webpack',\n  title: '使用webpack分割代码的思路',\n  publicDate: '2016年01月18日',\n  description: '把所有的东西都打包进一个文件的做法不仅简单而且利于缓存。但代码的增长和非wifi的网络环境会使得资源加载时间显得更加不可接受。好在webpack提供了一些强大的特性来帮助我们解决这一问题。',\n}, {\n  fileName: 'javascript_compiler_nunjucks',\n  title: '探究JavaScript上的编译器 —— nunjucks',\n  publicDate: '2016年01月12日',\n  description: '这次的编译器是模板引擎nunjucks，并且我将尝试修复nunjucks上的bug作为本次实践。',\n}, {\n  fileName: 'javascript_compiler_marked',\n  title: '探究JavaScript上的编译器 —— marked',\n  publicDate: '2016年01月04日',\n  description: '现在可能很难找到适合入门的编译相关材料，但与之相对的是，很多的库和特性的实现都离不开编译这一流程。我对这些内容的学习将通过：marked，nunjucks和Jison三个项目的源码进行。',\n}, {\n  fileName: 'best_template_engine_in_node_js',\n  title: '探究用ES6 template strings替代前后端模板引擎',\n  publicDate: '2015年12月16日',\n  description: '模板引擎是其最主要的目的是拼接字符串。没有模板引擎我们当然也可以拼接字符串，只不过这一过程会很痛苦。而template strings本身就是为了解决这一问题而设计的，而tagged template strings又足够帮助我们实现模板引擎的功能。下文将探讨用ES6 template strings替代模板引擎的可行性及其优劣。',\n}, {\n  fileName:'how_does_react_hot_loader_works',\n  title: '探究Webpack中的HMR(hot module replacement)',\n  publicDate:'2015年12月04日',\n  description: '什么是HMR？HMR能做什么？我们可以看看react-transform的演示...react-transform的实现是基于webpack-dev-server之上的，这里我将从webpack-dev-server和React两方面简单总结HMR的实现原理。',\n}, {\n  fileName:'introduce_universal_javascript_and_its_implementation_in_static_pages',\n  title:' Universal(Isomorphic) JavaScript在React上的应用',\n  publicDate:'2015年11月26日',\n  description: 'React中的renderToString方法允许我们在服务器上渲染React部件，这点不仅可以帮助我们解决一些会出现在单页应用(SPA)上的问题，它甚至还允许我们将React用作模板引擎（template engine）来使用。下文还将附带一个简单的benchmark来对比React与传统模板引擎之间性能...',\n}, {\n  fileName:'immutable_data_structure_in_javascript',\n  title:' Javascript中的不可变（immutable）数据结构',\n  publicDate:'2015年10月6日',\n  description: 'Javascript中的不可变（immutable）数据结构可以简化数据操作上的一些问题，提高应用的性能。这里会举几个例子来介绍immutable在React应用上所能发挥的作用。',\n}, {\n  fileName:'why_i_choose_react_rather_than_angular_in_our_company',\n  title:' 为什么我选择了React来重构我们的前端',\n  publicDate:'2015年8月28日',\n  description: '我们公司和其他大多数初创公司一样，需要开始真正地正视前端开发中的问题，并进行重构时，我在Angular和React中选择了React。我的理由如下...',\n},\n];\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/posts.data.js","import path from 'path';\nimport fs from 'fs';\nimport crypto from 'crypto';\n\nimport moment from 'moment';\nimport RSS from 'rss';\n\nimport translate from '../../client/components/SimplePost/translate';\nimport posts from '../../client/posts.data';\n\nconst AUTHOR = 'oyyd';\nconst SITE_URL = 'https://blog.oyyd.net';\nconst FEED_URL = `${SITE_URL}/dist/feed.xml`;\n\nconst POST_PREFIX = path.resolve(process.cwd(), './posts');\n\nfunction getPostUrl(fileName) {\n  return `${SITE_URL}/post/${fileName}`;\n}\n\nfunction getPostContent(fileName) {\n  const filePath = path.join(POST_PREFIX, fileName);\n  return fs.readFileSync(filePath, { encoding: 'utf8' });\n}\n\nexport default function getContent() {\n  const feed = new RSS({\n    title: AUTHOR,\n\n    // jscs:disable\n    feed_url: FEED_URL,\n    site_url: SITE_URL,\n    // jscs:enable\n  });\n\n  posts.slice(0, 5).map((item) => {\n    const content = getPostContent(`${item.fileName}.md`);\n    const htmlContent = translate(content);\n\n    const md5 = crypto.createHash('md5');\n    const guid = md5.update(item.fileName).digest('hex');\n\n    return {\n      guid,\n      title: item.title,\n      description: htmlContent,\n      url: getPostUrl(item.fileName),\n      date: moment(item.publicDate, 'YYYY年MM月DD日'),\n    };\n  }).forEach((feedItem) => {\n    feed.item(feedItem);\n  });\n\n  return feed.xml(true);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/applyStatic/getFeeds.js","module.exports = require(\"crypto\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"crypto\"\n// module id = 15\n// module chunks = 0","module.exports = require(\"moment\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"moment\"\n// module id = 16\n// module chunks = 0","module.exports = require(\"rss\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"rss\"\n// module id = 17\n// module chunks = 0","import { marked, } from 'marked-chartjs-binding';\n\nfunction initCommands() {\n  let commands = [];\n\n  commands.push({\n    reg: /\\$sidenote\\((.*?)\\)/,\n    handler: (() => {\n      let sideNoteCount = 0;\n      return (content) => {\n        sideNoteCount++;\n        return `<sup id=\"${sideNoteCount}\" class=\"margin-toggle` +\n          ` sidenote-number\">${sideNoteCount}</sup>` +\n        `<span for=\"${sideNoteCount}\" class=\"mdl-tooltip sidenote\">${content}</span> `;\n      };\n    })(),\n  });\n\n  commands.push({\n    reg: /\\$publicdate\\((.*?)\\)/,\n    handler: (content) => {\n      return content;\n    },\n  });\n\n  return commands;\n}\n\nfunction translate(content) {\n  const commands = initCommands();\n\n  let result = marked(content);\n  for (let command of commands) {\n    let regResult = command.reg.exec(result);\n    while (regResult) {\n      let match = regResult[0];\n      let text = regResult[1];\n      result = result.replace(match, command.handler(text));\n      regResult = command.reg.exec(result);\n    }\n  }\n\n  return result;\n}\n\nexport default translate;\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/SimplePost/translate.js","module.exports = require(\"marked-chartjs-binding\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"marked-chartjs-binding\"\n// module id = 19\n// module chunks = 0","export default function apply(app) {\n  if (process.env.NODE_ENV === 'production') {\n    return;\n  }\n\n  const webpackMiddleware = require('webpack-dev-middleware');\n  const webpackHotMiddleware = require('webpack-hot-middleware');\n  const browserDEVConfig = require('../../../webpack_config/browser.dev');\n  const webpack = require('webpack');\n\n\n  const compiler = webpack(browserDEVConfig);\n\n  app.use(webpackMiddleware(compiler, {\n    publicPath: browserDEVConfig.output.publicPath,\n    log: () => {},\n  }));\n\n  app.use(webpackHotMiddleware(compiler));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/applyStatic/applyDEVServer.js","module.exports = require(\"webpack-dev-middleware\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack-dev-middleware\"\n// module id = 21\n// module chunks = 0","module.exports = require(\"webpack-hot-middleware\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack-hot-middleware\"\n// module id = 22\n// module chunks = 0","/* eslint-disable */\nconst path = require('path');\nconst webpack = require('webpack');\n\nconst ExtractTextPlugin = require('extract-text-webpack-plugin');\n\nmodule.exports = {\n  target: 'web',\n  devtool: 'source-map',\n  debug: true,\n  watch: true,\n  entry: {\n    browser_bundle: [\n      'react-hot-loader/patch',\n      'webpack-hot-middleware/client',\n      'webpack/hot/only-dev-server',\n      'babel-polyfill',\n      './src/client/bootstrap.js'\n    ],\n  },\n  output: {\n    path: path.join(__dirname, '../dist'),\n    publicPath: '/dist',\n    filename: '[name].js',\n  },\n  module: {\n    loaders: [{\n      test: /\\.js?$/,\n      loaders: [\n        'babel?' + JSON.stringify({\n          \"presets\": [\"es2015\"],\n          \"plugins\": [\"transform-react-jsx\", \"transform-async-to-generator\"]\n        }),\n      ],\n      exclude: /node_modules/,\n    }, {\n      test: /\\.less$/,\n      loader: ExtractTextPlugin.extract('style-loader', 'css-loader!less-loader'),\n    },\n  ]},\n  plugins: [\n    new ExtractTextPlugin('./style.css', {\n      allChunks: true,\n    }),\n    new webpack.HotModuleReplacementPlugin({ quiet: true }),\n    // new webpack.DefinePlugin({\n    //   'process.env': {\n    //     NODE_ENV: JSON.stringify('production'),\n    //   },\n    // }),\n  ],\n};\n\n\n\n// WEBPACK FOOTER //\n// ./webpack_config/browser.dev.js","module.exports = require(\"webpack\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack\"\n// module id = 24\n// module chunks = 0","module.exports = require(\"extract-text-webpack-plugin\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"extract-text-webpack-plugin\"\n// module id = 25\n// module chunks = 0","import express from 'express';\n\nimport page from './page';\n\nfunction response(res) {\n  res();\n}\n\nconst renderPost = page.bind(null, response, false);\n\nconst renderPage = page.bind(null, response, true);\n\nconst router = new express.Router();\n\nrouter.get('/post/:name', renderPost);\n\nrouter.use(renderPage);\n\nexport default router;\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/router/index.js","// server\nimport React from 'react';\nimport { renderToString } from 'react-dom/server';\n\nimport { Provider } from 'react-redux';\nimport getPostContent from '../getPostContent';\nimport { generateRouter } from '../../client/generateRoutes';\nimport createStore from '../../client/state/createStore';\nimport PostsData from '../../client/posts.data';\nimport { initPost } from '../../client/state/post/actions';\nimport { match, RouterContext } from 'react-router';\nimport escapeJSONString from '../utils/escapeJSONString';\nimport createPage from '../../template/createPage';\n\n// TODO: a better 404 response\nconst NOT_FOUND_CONTENT = 'not found';\n\nfunction transformPostsData(data) {\n  const hash = {};\n  let item;\n\n  for (item of data) {\n    hash[item.fileName] = item;\n  }\n\n  return hash;\n}\n\nconst postsDataHash = transformPostsData(PostsData);\n\nfunction updatePostStore(store, postData) {\n  return new Promise((resolve, reject) => {\n    getPostContent(postData.fileName).then(htmlContent => {\n      const { title, fileName } = postData;\n\n      try {\n        store.dispatch(initPost(title, fileName, htmlContent));\n      } catch (e) {\n        reject(e);\n      }\n\n      resolve();\n    });\n  });\n}\n\nfunction internalErr(res, message) {\n  return res.status(500).send(message);\n}\n\nfunction redirectReq(res, path) {\n  return res.redirect(302, path);\n}\n\nfunction notFound(res) {\n  return res.status(404).send(NOT_FOUND_CONTENT);\n}\n\nfunction renderPage(res, page) {\n  return res.status(200).send(page);\n}\n\nfunction getPostPageContent(res, store, postData, props, next) {\n  return updatePostStore(store, postData).then(() => {\n    let initialState = null;\n\n    try {\n      initialState = escapeJSONString(JSON.stringify(store.getState()));\n    } catch (err) {\n      next(err);\n      return;\n    }\n\n    next(null, createPage({\n      initialState,\n      title: postData.title,\n      content: renderToString(\n        <Provider store={store}>\n          <RouterContext {...props} />\n        </Provider>\n      ),\n      description: postData.description,\n    }));\n  }, next).catch(next);\n}\n\nexport default function getPageRender(callback, isPage, req, res) {\n  const store = createStore({}, req.url);\n  const routes = generateRouter(null);\n  const fileName = req.url.slice(req.url.lastIndexOf('/') + 1);\n  const postData = postsDataHash[fileName];\n\n  match({ routes, location: req.url }, (error, redirectLocation, renderProps) => {\n    let operator = null;\n\n    if (error) {\n      operator = internalErr.bind(null, res, error.message);\n    } else if (redirectLocation) {\n      operator = redirectReq.bind(null, res,\n        `${redirectLocation.pathname}${redirectLocation.search}`);\n    } else if (!renderProps || (!isPage && !postData)) {\n      operator = notFound.bind(null, res);\n    } else if (isPage) {\n      operator = renderPage.bind(null, res, createPage({\n        content: renderToString(\n          <Provider store={store}>\n            <RouterContext {...renderProps} />\n          </Provider>\n        ),\n        initialState: escapeJSONString(JSON.stringify(store)),\n      }));\n    }\n\n    if (operator) {\n      callback(operator);\n      return;\n    }\n\n    operator = getPostPageContent(res, store, postData, renderProps, (err, pageContent) => {\n      callback(err ? internalErr.bind(null, res, err.message)\n        : renderPage.bind(null, res, pageContent));\n    });\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/router/page.js","module.exports = require(\"react\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react\"\n// module id = 28\n// module chunks = 0","module.exports = require(\"react-dom/server\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-dom/server\"\n// module id = 29\n// module chunks = 0","module.exports = require(\"react-redux\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-redux\"\n// module id = 30\n// module chunks = 0","// server\nimport fs from 'fs';\nimport path from 'path';\nimport parsePost from './parsePost';\n\nconst prefix = process.cwd();\n\n// TODO: `SimplePostsCache` will cost too much memory someday\n// TODO: use redis or whatever\nconst SimplePostsCache = {};\n\nfunction getPostContent(fileName) {\n  return new Promise((resolve, reject) => {\n    if (SimplePostsCache[fileName]) {\n      resolve(SimplePostsCache[fileName]);\n      return;\n    }\n\n    fs.readFile(\n      path.join(prefix, 'posts', `${fileName}.md`), { encoding: 'utf8' }, (err, _data) => {\n        if (err) {\n          reject(err);\n          return;\n        }\n\n        const data = parsePost(_data);\n\n        SimplePostsCache[fileName] = data;\n        resolve(data);\n      });\n  });\n}\n\nexport default getPostContent;\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/getPostContent/index.js","import translate from '../../client/components/SimplePost/translate';\n\nexport default function parsePost(rawText) {\n  return translate(rawText);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/getPostContent/parsePost.js","import React from 'react';\nimport SimpleApp from './components/SimpleApp';\nimport SimplePost from './components/SimplePost';\nimport SimpleList from './components/SimpleList';\nimport About from './pages/About/index.js';\nimport { Router, Route, IndexRoute } from 'react-router';\n\nexport function generateRoutes() {\n  return (\n    <Route path=\"/\" component={SimpleApp}>\n      <IndexRoute component={SimpleList} />\n      <Route path=\"post/:id\" component={SimplePost} />\n      <Route path=\"/about\" component={About} />\n    </Route>\n  );\n}\n\nexport function generateRouter(history) {\n  const routes = generateRoutes();\n\n  return (\n    <Router history={history} children={routes} />\n  );\n}\n\nexport default generateRoutes;\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/generateRoutes.js","import React, { Component } from 'react';\n\nimport Header from './Header';\n\nclass SimpleApp extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <div className='oyyd-blog'>\n        <Header />\n        <div className='content'>\n          {this.props.children}\n        </div>\n        {this.renderFooter()}\n      </div>\n    );\n  }\n\n  renderFooter() {\n    return (\n      <div className='footer'>\n        <p>\n          <span>Built by </span>\n          <a href='https://github.com/oyyd/oyyd-blog'>oyyd-blog</a>\n          <span> and styled by modified </span>\n          <a href='https://www.getmdl.io/index.html'>material-design-lite</a>\n          <span>.</span>\n        </p>\n      </div>\n    );\n  }\n}\n\nexport default SimpleApp;\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/SimpleApp/index.js","import React, { Component } from 'react';\nimport $ from 'jquery';\n\nimport { connect } from 'react-redux';\nimport PerspectiveImg from '../PerspectiveImg';\n\nconst { string } = React.PropTypes;\n\nconst ACTIVE_ITEMS = {\n  ABOUT: 'ABOUT',\n  POST_LIST: 'POST_LIST',\n};\n\nconst HEADER_HEIGHT = 200;\nconst BG_IMG_WIDTH = 1300;\nconst BG_IMG_HEIGHT = 600;\nconst BG_IMGS = [\n  '/static/img/app/header-bg/1.png',\n  '/static/img/app/header-bg/2.png',\n  '/static/img/app/header-bg/3.png',\n  '/static/img/app/header-bg/4.png',\n  '/static/img/app/header-bg/5.png',\n];\nconst BG_IMGS_LENGTH = BG_IMGS.length;\n\nfunction getActiveItem(path) {\n  switch (path) {\n    case '/about':\n      return ACTIVE_ITEMS.ABOUT;\n    default:\n      return ACTIVE_ITEMS.POST_LIST;\n  }\n}\n\nclass Header extends Component {\n  constructor(props) {\n    super(props);\n\n    const randomIndex = Math.round(Math.random() * (BG_IMGS_LENGTH - 1));\n\n    this.bgImg = BG_IMGS[randomIndex];\n\n    this.state = {\n      windowWidth: 0,\n    };\n\n    this.handleResizing = this.handleResizing.bind(this);\n  }\n\n  componentDidMount() {\n    this.$window = $(window);\n    this.$window.resize(this.handleResizing);\n    this.handleResizing();\n  }\n\n  componentWillUnmount() {\n    this.$window.unbind('resize', this.handleResizing);\n  }\n\n  handleResizing() {\n    const windowWidth = this.$window.width();\n\n    this.setState({\n      windowWidth,\n    });\n  }\n\n  renderNav() {\n    const ACTIVE_ITEM = getActiveItem(this.props.path);\n\n    return (\n      <div className=\"nav\">\n        <div className=\"column\">\n          <a\n            className={ACTIVE_ITEM === ACTIVE_ITEMS.POST_LIST ? 'item active' : 'item'}\n            href=\"/\"\n          >\n            POST LIST\n          </a>\n          <a\n            className={ACTIVE_ITEM === ACTIVE_ITEMS.ABOUT ? 'item active' : 'item'}\n            href=\"/about\" title=\"about me\"\n          >\n            ABOUT\n          </a>\n        </div>\n        <div className=\"links\">\n          <a\n            className=\"header-icon github-link\"\n            href=\"https://github.com/oyyd\"\n            title=\"github\"\n          >\n            <span className=\"icon-github\" />\n          </a>\n          <a\n            className=\"header-icon rss-feed\"\n            href=\"/dist/feed.xml\"\n            title=\"rss feed\"\n          >\n            <span className=\"icon-feed4\" />\n          </a>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"header\">\n        <PerspectiveImg\n          src={this.bgImg}\n          containerWidth={this.state.windowWidth}\n          containerHeight={HEADER_HEIGHT}\n          width={BG_IMG_WIDTH}\n          height={BG_IMG_HEIGHT}\n        />\n        <div className=\"hover-content\">\n          <h1 className=\"site-name no-deco\">OYYD BLOG</h1>\n          {this.renderNav()}\n        </div>\n      </div>\n    );\n  }\n}\n\nHeader.propTypes = {\n  path: string,\n};\n\nfunction mapState(state) {\n  return {\n    path: state.routing.location.pathname,\n  };\n}\n\nconst ConnectedHeader = connect(mapState)(Header);\n\nexport default ConnectedHeader;\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/SimpleApp/Header.js","module.exports = require(\"jquery\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jquery\"\n// module id = 36\n// module chunks = 0","import React from 'react';\n\nconst { string, number, } = React.PropTypes;\n\nconst START_RATIO = 1.3,\n  END_RATIO= 1,\n  ANIMATION_TIME = 24;\n\nfunction getZeroIfNaN(number) {\n  if (isNaN(number)) {\n    return 0;\n  }\n\n  return number;\n}\n\nclass PerspectiveImg extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const { width, height, containerWidth, containerHeight, } = props;\n\n    this.ratio = START_RATIO;\n\n    let imgStyle = Object.assign({}, style,\n      this.getImgStyle(true, props)\n    );\n\n    this.state = {\n      start: false,\n      show: false,\n      imgStyle,\n    };\n\n    this.getImgStyle = this.getImgStyle.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({\n      start: true,\n    });\n  }\n\n  componentWillReceiveProps(props) {\n    this.state = {\n      imgStyle: Object.assign({}, style,\n        this.getImgStyle(this.state.show, props)\n      ),\n    };\n  }\n\n  getImgStyle(show, props) {\n    props = props || this.props;\n\n    const {\n      width, height, containerWidth, containerHeight,\n    } = props;\n    const { ratio, } = this;\n\n    let newWidth = containerWidth * ratio;\n    let newHeight = newWidth * height / width;\n\n    return {\n      top: getZeroIfNaN((containerHeight - newHeight) / 2),\n      left: getZeroIfNaN((containerWidth - newWidth) / 2),\n      width: getZeroIfNaN(newWidth),\n      height: getZeroIfNaN(newHeight),\n    };\n  }\n\n  startAnimation() {\n    this.ratio = END_RATIO;\n\n    this.setState({\n      show: true,\n      imgStyle: Object.assign({\n        transition: `${ANIMATION_TIME}s`,\n      }, style, this.getImgStyle(this.state.show)),\n    });\n  }\n\n  render() {\n    return (\n      <img onLoad={this.startAnimation.bind(this)}\n        style={this.state.imgStyle}\n        src={this.state.start ? this.props.src : null}/>\n    );\n  }\n}\n\nPerspectiveImg.propTypes = {\n  src: string.isRequired,\n  width: number.isRequired,\n  height: number.isRequired,\n  containerWidth: number.isRequired,\n  containerHeight: number.isRequired,\n};\n\nconst style = {\n  position: 'absolute',\n};\n\nexport default PerspectiveImg;\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/PerspectiveImg/index.js","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { connect } from 'react-redux';\nimport { renderCharts } from 'marked-chartjs-binding';\n\nimport CONSTANTS from '../../CONSTANTS';\nimport Disqus from '../Disqus';\nimport getPostUrl from '../../utils/getPostUrl';\nimport isBrowser from '../../utils/isBrowser';\n\nconst forEach = [].forEach;\n\nconst { string } = React.PropTypes;\n\nconst CODEMIRROR_DEFAULT_CONFIG = {\n  htmlMode: true,\n  readOnly: true,\n  lineNumbers: true,\n  lineWrapping: true,\n  theme: 'monokai-sublime',\n  tabSize: 2,\n};\n\nfunction getModeFromNode(codeDOMNode) {\n  let lang = codeDOMNode.getAttribute('class');\n  if (!lang) {\n    return '';\n  }\n\n  lang = lang.slice(lang.indexOf('lang-') + 5);\n  switch (lang.toLowerCase()) {\n    case 'js':\n    case 'javascript':\n      return 'javascript';\n    case 'html':\n    case 'xml':\n      return 'xml';\n    default:\n      return '';\n  }\n}\n\nfunction htmlDecode(input) {\n  var e = document.createElement('div');\n  e.innerHTML = input;\n  return e.childNodes.length === 0 ? '' : e.childNodes[0].nodeValue;\n}\n\n// TODO: avoid double highlight\nfunction highlightCode(codeBlockArr) {\n  if (!isBrowser() || codeBlockArr.length === 0) {\n    return;\n  }\n\n  forEach.call(codeBlockArr, codeDOM => {\n    const config = Object.assign({}, CODEMIRROR_DEFAULT_CONFIG, {\n      value: htmlDecode(codeDOM.innerHTML),\n      mode: getModeFromNode(codeDOM),\n    });\n\n    new CodeMirror((elt) => {\n      codeDOM.parentNode.parentNode.replaceChild(elt, codeDOM.parentNode);\n    }, config);\n  });\n}\n\nclass SimplePost extends React.Component {\n  render() {\n    const id = `${CONSTANTS.DISQUS.ARTICLE_ID_PREFIX}${this.props.title}`;\n    const url = getPostUrl(this.props.fileName);\n\n    return (\n      <div className='blog-simple-post region'>\n        <MarkedContent>{this.props.htmlContent}</MarkedContent>\n        <Disqus initialIdentifier={id}\n          initialTitle={this.props.title} initialUrl={url}/>\n      </div>\n    );\n  }\n}\n\nSimplePost.propTypes = {\n  title: string,\n  fileName: string,\n  htmlContent: string,\n};\n\nconst MarkedContent = React.createClass({\n  componentDidMount() {\n    this.highlightCodes();\n    renderCharts();\n  },\n\n  componentDidUpdate() {\n    this.highlightCodes();\n    renderCharts();\n  },\n\n  highlightCodes() {\n    let codes = ReactDOM.findDOMNode(this).querySelectorAll('pre code');\n    highlightCode(codes);\n  },\n\n  render() {\n    return (\n      <div dangerouslySetInnerHTML={{__html: this.props.children.toString()}} />\n    );\n  },\n});\n\nfunction select(state) {\n  const {title, htmlContent, fileName} = state.post;\n\n  return {\n    title,\n    fileName,\n    htmlContent,\n  };\n}\n\nconst ConnectedSimplePost = connect(select)(SimplePost);\n\nexport default ConnectedSimplePost;\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/SimplePost/index.js","module.exports = require(\"react-dom\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-dom\"\n// module id = 39\n// module chunks = 0","import React from 'react';\n\nimport CONSTANTS from '../../CONSTANTS';\nimport isBrowser from '../../utils/isBrowser';\n\nconst {string} = React.PropTypes;\n\nconst Disqus = React.createClass({\n  propTypes: {\n    initialIdentifier: string,\n    initialTitle: string,\n    initialUrl: string,\n  },\n  getDefaultProps() {\n    return {\n      initialIdentifier: CONSTANTS.DISQUS.DEFAULT_IDENTIFIER,\n      initialTitle: CONSTANTS.DISQUS.DEFAULT_TITLE,\n      initialUrl: !isBrowser() ? '' : location.href,\n    };\n  },\n\n  componentDidMount() {\n    this.requireInit();\n\n    // if(window.DISQUS){\n    //   this.configInit();\n    // }else{\n    //   this.requireInit();\n    // }\n  },\n\n  requireInit() {\n    if (!isBrowser()) {\n      return;\n    }\n\n    // jscs:disable\n    window.disqus_shortname = CONSTANTS.DISQUS.SHORT_NAME;\n    window.disqus_identifier = this.props.initialIdentifier;\n    window.disqus_title = this.props.initialTitle;\n    window.disqus_url = this.props.initialUrl;\n\n    (function() {\n      var dsq = document.createElement('script');\n      dsq.type = 'text/javascript';\n      dsq.async = true;\n      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';\n      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);\n    })();\n\n    // jscs:enable\n  },\n\n  // configInit(){\n  //   window.DISQUS.reset({\n  //     reload: true,\n  //     config: () => {\n  //       this.page.identifier = this.props.initialIdentifier;\n  //       this.page.title = this.props.initialTitle;\n  //       this.page.url = this.props.initialUrl;\n  //     }\n  //   });\n  // },\n  // disqusTempData: {},\n  // resetConfig(identifier, title, url){\n  //   if(window.DISQUS){\n  //     if(!identifier){\n  //       return;\n  //     }\n  //     if(!url){\n  //       url = location.href;\n  //     }\n  //     if(!title){\n  //       title = document.title;\n  //     }\n  //     window.DISQUS.reset({\n  //       reload: true,\n  //       config: function () {\n  //         this.page.identifier = identifier;\n  //         this.page.title = title;\n  //         this.page.url = url;\n  //       }\n  //     });\n  //   }else{\n  //     this.disqusTempData = {identifier, title, url};\n  //     this.startCheckingTimer();\n  //   }\n  // },\n  // disqusInited:false,\n  // startCheckingTimer(){\n  //   if(!this.disqusInited){\n  //     setTimeout(() => {\n  //       if(window.DISQUS){\n  //         this.disqusInited = true;\n  //         const {identifier, title, url} = this.disqusTempData;\n  //         window.DISQUS.reset({\n  //           reload: true,\n  //           config: () => {\n  //             this.page.identifier = identifier;\n  //             this.page.title = title;\n  //             this.page.url = url;\n  //           }\n  //         });\n  //       }else{\n  //         this.startCheckingTimer();\n  //       }\n  //     }, 1000);\n  //   }\n  // },\n  render() {\n    return (\n      <div className='blog-disqus' id='disqus_thread'></div>\n    );\n  },\n});\n\nexport default Disqus;\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/Disqus/index.js","function isBrowser() {\n  return typeof window !== 'undefined';\n}\n\nexport default isBrowser;\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/utils/isBrowser.js","import CONSTANTS from '../CONSTANTS';\n\nconst { ORIGIN } = CONSTANTS.BLOG;\n\n// TODO: it wold be pain when we change url\nexport default function getPostUrl(fileName) {\n  return `${ORIGIN}/post/${fileName}`;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/utils/getPostUrl.js","import React from 'react';\nimport ReactDON from 'react-dom';\n\nimport posts from '../../posts.data';\nimport Disqus from '../Disqus';\n\nlet SimpleList = React.createClass({\n  render() {\n    return (\n      <div className='blog-simple-list region'>\n        <h2 className='mdl-typography--display-1'>文章列表</h2>\n        {posts.map((item, index)=>(\n          <div className='post-item mdl-typography--title' key={item.title + item.publicDate}>\n            <a className='title no-deco' href={'/post/' + item.fileName}>\n              {item.title}\n            </a>\n            <p className='public-date'>\n              {item.publicDate}\n            </p>\n            <p className='description'>\n              {item.description}\n            </p>\n          </div>\n        ))}\n        <Disqus/>\n      </div>\n    );\n  },\n});\n\nexport default SimpleList;\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/SimpleList/index.js","import React from 'react';\n\nconst LIST_STYLE = {\n  listStyle: 'inherit',\n};\nconst IMG_STYLE = { marginTop: 20 };\n\nconst JLPT_WIKI_URL = 'https://ja.wikipedia.org/wiki/%E6%97%A5%E6%9C%AC%E8%AA%9E%E8%83%BD%E5%8A%9B%E8%A9%A6%E9%A8%93';\nconst ATOLS_YOUTUBE_URL = 'https://www.youtube.com/user/gridm7';\nconst D3_GALLERY_SRC = 'https://camo.githubusercontent.com/3bd164ff8c1d4b3b934b624016211f8ae6487422/687474703a2f2f626c2e6f636b732e6f72672f6f7979642f7261772f38353966616663383132323937376133616664362f7468756d626e61696c2e706e67';\nconst SSJS = 'https://github.com/oyyd/shadowsocks-js';\n\nfunction About() {\n  return (\n    <div>\n      <div className=\"region\">\n        <h2 className=\"mdl-typography--display-1\">About oyyd.blog</h2>\n        <p>features</p>\n        <ul>\n          <li>ES6 + async await + SourceMap</li>\n          <li>Flexibility > Performance</li>\n          <li>Server Side Rendering</li>\n          <li>Avoid Heavy Usage of Preprocessing</li>\n          <li>HMR(failed at react router)</li>\n        </ul>\n      </div>\n      <div className=\"region\">\n        <h2 className=\"mdl-typography--display-1\">About me</h2>\n        <p>Hi，我每天都会写不少代码，并思考其中的事情。你可能有兴趣了解得更多一点：</p>\n        <ul style={LIST_STYLE}>\n          <li>我花了一年多的时间学习日语，考了\n            <a href={JLPT_WIKI_URL} target=\"_blank\">JLPT N1</a>的证书。\n          </li>\n          <li>高中时参加了NOIP，开始编程，获得了一等奖，并从中体会到了别样的乐趣。</li>\n          <li>可以讲闽南语。</li>\n          <li>听很多vocaloid相关的音乐。</li>\n          <li>不常使用社交软件。</li>\n          <li>偶尔上pixiv。</li>\n        </ul>\n      </div>\n      <div className=\"region\">\n        <h2 className=\"mdl-typography--display-1\">Contact</h2>\n        <p>\n          不要担心，给我发邮件吧：\n          <a href=\"mailto://oyydoibh@gmail.com\">oyydoibh@gmail.com</a>\n        </p>\n      </div>\n      <div className=\"region\">\n        <h2 className=\"mdl-typography--display-1\">Works</h2>\n        <ul className=\"content\">\n          <li>\n            协作者&nbsp;\n            <a href=\"https://github.com/mozilla/nunjucks\" target=\"_blank\">\n              mozilla/nunjucks\n            </a>\n          </li>\n          <li>\n            翻译&nbsp;\n            <a\n              href=\"https://www.gitbook.com/book/oyyd/typescript-handbook-zh/details\"\n              target=\"_blank\"\n            >\n              Typescript Handbook\n            </a>\n          </li>\n          <li>\n            <div>D3 Gallery -\n              <a href=\"http://bl.ocks.org/oyyd/859fafc8122977a3afd6\" target=\"_blank\">\n                Days-Hours Heatmap\n              </a>\n            </div>\n            <img style={IMG_STYLE} src={D3_GALLERY_SRC} alt=\"Days-Hours Heatmap\" />\n          </li>\n        </ul>\n      </div>\n    </div>\n  );\n}\n\nAbout.title = 'oyyd-blog - 关于我';\n\nexport default About;\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/pages/About/index.js","module.exports = require(\"react-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-router\"\n// module id = 45\n// module chunks = 0","import { createStore as _createStore,\n  combineReducers, applyMiddleware } from 'redux';\nimport { routeReducer, syncHistory } from 'react-router-redux';\nimport { createMemoryHistory, browserHistory } from 'react-router';\n\n// reducers\nimport postReducer from './post/reducer';\n\nfunction createReducer(post) {\n  return combineReducers({\n    routing: routeReducer,\n    post,\n  });\n}\n\nexport default function createStore(initialState, url, shouldPatch) {\n  const reducers = createReducer(postReducer);\n\n  const history = (typeof url !== 'string') ? browserHistory : createMemoryHistory(url);\n  const reduxRouterMiddleware = syncHistory(history);\n  const createStoreWithMiddleware = applyMiddleware(reduxRouterMiddleware)(_createStore);\n\n  const store = createStoreWithMiddleware(reducers, initialState);\n\n  if (module.hot && shouldPatch) {\n    module.hot.accept('./post/reducer', () => {\n      // eslint-disable-next-line\n      const postReducer = require('./post/reducer');\n      const nextRootReducer = createReducer(postReducer);\n\n      store.replaceReducer(nextRootReducer);\n    });\n  }\n\n  return store;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/state/createStore.js","module.exports = require(\"redux\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"redux\"\n// module id = 47\n// module chunks = 0","module.exports = require(\"react-router-redux\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-router-redux\"\n// module id = 48\n// module chunks = 0","const initialPost = {\n  title: null,\n  fileName: null,\n  htmlContent: null,\n};\n\nfunction reducer(state = initialPost, action) {\n  switch (action.type){\n    case 'POST_INIT':\n      return {\n        title: action.title,\n        fileName: action.fileName,\n        htmlContent: action.htmlContent,\n      };\n    default:\n      return state;\n  };\n}\n\nexport default reducer;\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/state/post/reducer.js","export function initPost(title, fileName, htmlContent) {\n  return {\n    type: 'POST_INIT',\n    title,\n    fileName,\n    htmlContent,\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/state/post/actions.js","function escapeJSONString(string) {\n  return string\n    .replace(/[\\\\]/g, '\\\\\\\\')\n    .replace(/[\\\"]/g, '\\\\\\\"')\n    .replace(/[\\/]/g, '\\\\/')\n    .replace(/[\\b]/g, '\\\\b')\n    .replace(/[\\f]/g, '\\\\f')\n    .replace(/[\\n]/g, '\\\\n')\n    .replace(/[\\r]/g, '\\\\r')\n    .replace(/[\\t]/g, '\\\\t');\n}\n\nexport default escapeJSONString;\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/utils/escapeJSONString.js","import createHead from './createHead';\n\nfunction createPage(ctx) {\n  const { content } = ctx;\n  let { title, description, initialState } = ctx;\n\n  title = title || 'oyyd blog';\n  description = description || '这是亚东的博客，你可以在上面看到我的一些想法和实践，欢迎来访。';\n  initialState = initialState || 'null';\n\n  return (\n    `<!DOCTYPE html>\n    <html>\n      ${createHead({ title, description })}\n      <body>\n        <div id=\"main\">${content}</div>\n        <script>\n          window.__INITIAL_STATE__ = JSON.parse(\"${initialState}\");\n        </script>\n        <script src=\"/static_lib/codemirror/codemirror.js\"></script>\n        <script src=\"/static_lib/codemirror/mode/javascript/javascript.js\"></script>\n        <script src=\"/static_lib/codemirror/mode/xml/xml.js\"></script>\n        <script src=\"/dist/browser_bundle.js\"></script>\n        <script>\n          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');\n\n          ga('create', 'UA-70462946-1', 'auto');\n          ga('send', 'pageview');\n        </script>\n      </body>\n    </html>`\n  );\n}\n\nexport default createPage;\n\n\n\n// WEBPACK FOOTER //\n// ./src/template/createPage.js","function createHead(ctx) {\n  const { title, description } = ctx;\n\n  return (\n    `<head>\n      <title>${title}</title>\n      <meta name=\"description\" content=\"${description}\"/>\n      <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n      <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n      <link rel=\"shortcut icon\" href=\"/static/favicon.ico\" />\n      <link rel=\"stylesheet\" href=\"/static_lib/codemirror/codemirror.css\"/>\n      <link rel=\"stylesheet\" href=\"/static_lib/codemirror/theme/monokai-sublime.css\"/>\n      <link rel=\"stylesheet\" href=\"/dist/style.css\"/>\n    </head>`\n  );\n}\n\nexport default createHead;\n\n\n\n// WEBPACK FOOTER //\n// ./src/template/createHead.js"],"sourceRoot":""}